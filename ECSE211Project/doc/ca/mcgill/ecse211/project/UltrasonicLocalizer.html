<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<!--NewPage-->
<HTML>
<HEAD>
<!-- Generated by javadoc (build 1.5.0_11) on Fri Nov 24 12:52:40 EST 2017 -->
<TITLE>
UltrasonicLocalizer
</TITLE>

<META NAME="keywords" CONTENT="ca.mcgill.ecse211.project.UltrasonicLocalizer class">

<LINK REL ="stylesheet" TYPE="text/css" HREF="../../../../stylesheet.css" TITLE="Style">

<SCRIPT type="text/javascript">
function windowTitle()
{
    parent.document.title="UltrasonicLocalizer";
}
</SCRIPT>
<NOSCRIPT>
</NOSCRIPT>

</HEAD>

<BODY BGCOLOR="white" onload="windowTitle();">


<!-- ========= START OF TOP NAVBAR ======= -->
<A NAME="navbar_top"><!-- --></A>
<A HREF="#skip-navbar_top" title="Skip navigation links"></A>
<TABLE BORDER="0" WIDTH="100%" CELLPADDING="1" CELLSPACING="0" SUMMARY="">
<TR>
<TD COLSPAN=2 BGCOLOR="#EEEEFF" CLASS="NavBarCell1">
<A NAME="navbar_top_firstrow"><!-- --></A>
<TABLE BORDER="0" CELLPADDING="0" CELLSPACING="3" SUMMARY="">
  <TR ALIGN="center" VALIGN="top">
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="../../../../ca/mcgill/ecse211/project/package-summary.html"><FONT CLASS="NavBarFont1"><B>Package</B></FONT></A>&nbsp;</TD>
  <TD BGCOLOR="#FFFFFF" CLASS="NavBarCell1Rev"> &nbsp;<FONT CLASS="NavBarFont1Rev"><B>Class</B></FONT>&nbsp;</TD>
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="class-use/UltrasonicLocalizer.html"><FONT CLASS="NavBarFont1"><B>Use</B></FONT></A>&nbsp;</TD>
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="package-tree.html"><FONT CLASS="NavBarFont1"><B>Tree</B></FONT></A>&nbsp;</TD>
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="../../../../deprecated-list.html"><FONT CLASS="NavBarFont1"><B>Deprecated</B></FONT></A>&nbsp;</TD>
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="../../../../index-files/index-1.html"><FONT CLASS="NavBarFont1"><B>Index</B></FONT></A>&nbsp;</TD>
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="../../../../help-doc.html"><FONT CLASS="NavBarFont1"><B>Help</B></FONT></A>&nbsp;</TD>
  </TR>
</TABLE>
</TD>
<TD ALIGN="right" VALIGN="top" ROWSPAN=3><EM>
</EM>
</TD>
</TR>

<TR>
<TD BGCOLOR="white" CLASS="NavBarCell2"><FONT SIZE="-2">
&nbsp;<A HREF="../../../../ca/mcgill/ecse211/project/OdometryDisplay.html" title="class in ca.mcgill.ecse211.project"><B>PREV CLASS</B></A>&nbsp;
&nbsp;<A HREF="../../../../ca/mcgill/ecse211/project/UltrasonicPoller.html" title="class in ca.mcgill.ecse211.project"><B>NEXT CLASS</B></A></FONT></TD>
<TD BGCOLOR="white" CLASS="NavBarCell2"><FONT SIZE="-2">
  <A HREF="../../../../index.html?ca/mcgill/ecse211/project/UltrasonicLocalizer.html" target="_top"><B>FRAMES</B></A>  &nbsp;
&nbsp;<A HREF="UltrasonicLocalizer.html" target="_top"><B>NO FRAMES</B></A>  &nbsp;
&nbsp;<SCRIPT type="text/javascript">
  <!--
  if(window==top) {
    document.writeln('<A HREF="../../../../allclasses-noframe.html"><B>All Classes</B></A>');
  }
  //-->
</SCRIPT>
<NOSCRIPT>
  <A HREF="../../../../allclasses-noframe.html"><B>All Classes</B></A>
</NOSCRIPT>


</FONT></TD>
</TR>
<TR>
<TD VALIGN="top" CLASS="NavBarCell3"><FONT SIZE="-2">
  SUMMARY:&nbsp;NESTED&nbsp;|&nbsp;<A HREF="#field_summary">FIELD</A>&nbsp;|&nbsp;<A HREF="#constructor_summary">CONSTR</A>&nbsp;|&nbsp;<A HREF="#method_summary">METHOD</A></FONT></TD>
<TD VALIGN="top" CLASS="NavBarCell3"><FONT SIZE="-2">
DETAIL:&nbsp;<A HREF="#field_detail">FIELD</A>&nbsp;|&nbsp;<A HREF="#constructor_detail">CONSTR</A>&nbsp;|&nbsp;<A HREF="#method_detail">METHOD</A></FONT></TD>
</TR>
</TABLE>
<A NAME="skip-navbar_top"></A>
<!-- ========= END OF TOP NAVBAR ========= -->

<HR>
<!-- ======== START OF CLASS DATA ======== -->
<H2>
<FONT SIZE="-1">
ca.mcgill.ecse211.project</FONT>
<BR>
Class UltrasonicLocalizer</H2>
<PRE>
java.lang.Object
  <IMG SRC="../../../../resources/inherit.gif" ALT="extended by "><B>ca.mcgill.ecse211.project.UltrasonicLocalizer</B>
</PRE>
<HR>
<DL>
<DT><PRE>public class <B>UltrasonicLocalizer</B><DT>extends java.lang.Object</DL>
</PRE>

<P>
This class uses the ultrasonic sensor as well as falling / rising edge routine to know what is the 0 degrees direction.
<P>

<P>
<HR>

<P>
<!-- =========== FIELD SUMMARY =========== -->

<A NAME="field_summary"><!-- --></A>
<TABLE BORDER="1" WIDTH="100%" CELLPADDING="3" CELLSPACING="0" SUMMARY="">
<TR BGCOLOR="#CCCCFF" CLASS="TableHeadingColor">
<TH ALIGN="left" COLSPAN="2"><FONT SIZE="+2">
<B>Field Summary</B></FONT></TH>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>private &nbsp;int</CODE></FONT></TD>
<TD><CODE><B><A HREF="../../../../ca/mcgill/ecse211/project/UltrasonicLocalizer.html#choice">choice</A></B></CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;The choice for either rising (0) or falling (1) edge routine.</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>private &nbsp;double</CODE></FONT></TD>
<TD><CODE><B><A HREF="../../../../ca/mcgill/ecse211/project/UltrasonicLocalizer.html#correctedTheta">correctedTheta</A></B></CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;The angle that the robot is away from the zero angle.</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>private &nbsp;int</CODE></FONT></TD>
<TD><CODE><B><A HREF="../../../../ca/mcgill/ecse211/project/UltrasonicLocalizer.html#distance">distance</A></B></CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;The distance between the robot and the wall.</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>private &nbsp;double</CODE></FONT></TD>
<TD><CODE><B><A HREF="../../../../ca/mcgill/ecse211/project/UltrasonicLocalizer.html#firstAngle">firstAngle</A></B></CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;The angle where the robot detect the wall for the first time.</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>private &nbsp;boolean</CODE></FONT></TD>
<TD><CODE><B><A HREF="../../../../ca/mcgill/ecse211/project/UltrasonicLocalizer.html#firstPointDetected">firstPointDetected</A></B></CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Used to prevent the robot from detecting a point 2 times.</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>private &nbsp;EV3LargeRegulatedMotor</CODE></FONT></TD>
<TD><CODE><B><A HREF="../../../../ca/mcgill/ecse211/project/UltrasonicLocalizer.html#leftMotor">leftMotor</A></B></CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;The pointer to the left motor.</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>static&nbsp;float</CODE></FONT></TD>
<TD><CODE><B><A HREF="../../../../ca/mcgill/ecse211/project/UltrasonicLocalizer.html#lightValue">lightValue</A></B></CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;The value got by the front light sensor an updated by the LightSensor class.</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>private &nbsp;double</CODE></FONT></TD>
<TD><CODE><B><A HREF="../../../../ca/mcgill/ecse211/project/UltrasonicLocalizer.html#locationTheta">locationTheta</A></B></CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;The current theta angle.</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>private &nbsp;<A HREF="../../../../ca/mcgill/ecse211/project/Navigation.html" title="class in ca.mcgill.ecse211.project">Navigation</A></CODE></FONT></TD>
<TD><CODE><B><A HREF="../../../../ca/mcgill/ecse211/project/UltrasonicLocalizer.html#na">na</A></B></CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;The pointer to the Navigation class.</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>private &nbsp;<A HREF="../../../../ca/mcgill/ecse211/project/Odometer.html" title="class in ca.mcgill.ecse211.project">Odometer</A></CODE></FONT></TD>
<TD><CODE><B><A HREF="../../../../ca/mcgill/ecse211/project/UltrasonicLocalizer.html#odometer">odometer</A></B></CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;The pointer to the Odometer class.</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>private &nbsp;EV3LargeRegulatedMotor</CODE></FONT></TD>
<TD><CODE><B><A HREF="../../../../ca/mcgill/ecse211/project/UltrasonicLocalizer.html#rightMotor">rightMotor</A></B></CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;The pointer to the right motor.</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>private &nbsp;double</CODE></FONT></TD>
<TD><CODE><B><A HREF="../../../../ca/mcgill/ecse211/project/UltrasonicLocalizer.html#secondAngle">secondAngle</A></B></CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>private &nbsp;boolean</CODE></FONT></TD>
<TD><CODE><B><A HREF="../../../../ca/mcgill/ecse211/project/UltrasonicLocalizer.html#secondPointDetected">secondPointDetected</A></B></CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Used to prevent the robot from detecting a point 2 times.</TD>
</TR>
</TABLE>
&nbsp;
<!-- ======== CONSTRUCTOR SUMMARY ======== -->

<A NAME="constructor_summary"><!-- --></A>
<TABLE BORDER="1" WIDTH="100%" CELLPADDING="3" CELLSPACING="0" SUMMARY="">
<TR BGCOLOR="#CCCCFF" CLASS="TableHeadingColor">
<TH ALIGN="left" COLSPAN="2"><FONT SIZE="+2">
<B>Constructor Summary</B></FONT></TH>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD><CODE><B><A HREF="../../../../ca/mcgill/ecse211/project/UltrasonicLocalizer.html#UltrasonicLocalizer(ca.mcgill.ecse211.project.Navigation, ca.mcgill.ecse211.project.Odometer, EV3LargeRegulatedMotor, EV3LargeRegulatedMotor)">UltrasonicLocalizer</A></B>(<A HREF="../../../../ca/mcgill/ecse211/project/Navigation.html" title="class in ca.mcgill.ecse211.project">Navigation</A>&nbsp;navigation,
                    <A HREF="../../../../ca/mcgill/ecse211/project/Odometer.html" title="class in ca.mcgill.ecse211.project">Odometer</A>&nbsp;odometer,
                    EV3LargeRegulatedMotor&nbsp;leftMotor,
                    EV3LargeRegulatedMotor&nbsp;rightMotor)</CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;The constructor for this class sets the navigation and odometer objects.</TD>
</TR>
</TABLE>
&nbsp;
<!-- ========== METHOD SUMMARY =========== -->

<A NAME="method_summary"><!-- --></A>
<TABLE BORDER="1" WIDTH="100%" CELLPADDING="3" CELLSPACING="0" SUMMARY="">
<TR BGCOLOR="#CCCCFF" CLASS="TableHeadingColor">
<TH ALIGN="left" COLSPAN="2"><FONT SIZE="+2">
<B>Method Summary</B></FONT></TH>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>&nbsp;void</CODE></FONT></TD>
<TD><CODE><B><A HREF="../../../../ca/mcgill/ecse211/project/UltrasonicLocalizer.html#correctAngleAndLocation()">correctAngleAndLocation</A></B>()</CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;This method gets the two turning angles either from the falling edge mode or the rising edge mode.</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>&nbsp;void</CODE></FONT></TD>
<TD><CODE><B><A HREF="../../../../ca/mcgill/ecse211/project/UltrasonicLocalizer.html#doBangBang(int, int, int, int)">doBangBang</A></B>(int&nbsp;bandCenter,
           int&nbsp;bandWidth,
           int&nbsp;motorLow,
           int&nbsp;motorHigh)</CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;This method implements the bangbang controller for the flag detection</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>&nbsp;void</CODE></FONT></TD>
<TD><CODE><B><A HREF="../../../../ca/mcgill/ecse211/project/UltrasonicLocalizer.html#doUltrasonicLocalization()">doUltrasonicLocalization</A></B>()</CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;This method executes the ultrasonic localization.</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>private &nbsp;void</CODE></FONT></TD>
<TD><CODE><B><A HREF="../../../../ca/mcgill/ecse211/project/UltrasonicLocalizer.html#fallingEdge()">fallingEdge</A></B>()</CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;This method localizes the robot in the falling edge mode
 The ultrasonic sensor in front of the robot keeps detecting the distance between the wall and the robot
 When the ultrasonic sensor detects the falling edge, the robot records the turning angle, reverses the turning 
 direction and keeps turning until it finds the next falling edge.</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>&nbsp;void</CODE></FONT></TD>
<TD><CODE><B><A HREF="../../../../ca/mcgill/ecse211/project/UltrasonicLocalizer.html#processUSData(int)">processUSData</A></B>(int&nbsp;distance)</CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;This method updates the distance.</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>&nbsp;int</CODE></FONT></TD>
<TD><CODE><B><A HREF="../../../../ca/mcgill/ecse211/project/UltrasonicLocalizer.html#readUSDistance()">readUSDistance</A></B>()</CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;This method returns the value of the distance.</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>private &nbsp;void</CODE></FONT></TD>
<TD><CODE><B><A HREF="../../../../ca/mcgill/ecse211/project/UltrasonicLocalizer.html#risingEdge()">risingEdge</A></B>()</CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;This method localizes the robot in the rising edge mode.</TD>
</TR>
</TABLE>
&nbsp;<A NAME="methods_inherited_from_class_java.lang.Object"><!-- --></A>
<TABLE BORDER="1" WIDTH="100%" CELLPADDING="3" CELLSPACING="0" SUMMARY="">
<TR BGCOLOR="#EEEEFF" CLASS="TableSubHeadingColor">
<TH ALIGN="left"><B>Methods inherited from class java.lang.Object</B></TH>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD><CODE>clone, equals, finalize, getClass, hashCode, notify, notifyAll, toString, wait, wait, wait</CODE></TD>
</TR>
</TABLE>
&nbsp;
<P>

<!-- ============ FIELD DETAIL =========== -->

<A NAME="field_detail"><!-- --></A>
<TABLE BORDER="1" WIDTH="100%" CELLPADDING="3" CELLSPACING="0" SUMMARY="">
<TR BGCOLOR="#CCCCFF" CLASS="TableHeadingColor">
<TH ALIGN="left" COLSPAN="1"><FONT SIZE="+2">
<B>Field Detail</B></FONT></TH>
</TR>
</TABLE>

<A NAME="choice"><!-- --></A><H3>
choice</H3>
<PRE>
private int <B>choice</B></PRE>
<DL>
<DD>The choice for either rising (0) or falling (1) edge routine.
<P>
<DL>
</DL>
</DL>
<HR>

<A NAME="na"><!-- --></A><H3>
na</H3>
<PRE>
private <A HREF="../../../../ca/mcgill/ecse211/project/Navigation.html" title="class in ca.mcgill.ecse211.project">Navigation</A> <B>na</B></PRE>
<DL>
<DD>The pointer to the Navigation class.
<P>
<DL>
</DL>
</DL>
<HR>

<A NAME="odometer"><!-- --></A><H3>
odometer</H3>
<PRE>
private <A HREF="../../../../ca/mcgill/ecse211/project/Odometer.html" title="class in ca.mcgill.ecse211.project">Odometer</A> <B>odometer</B></PRE>
<DL>
<DD>The pointer to the Odometer class.
<P>
<DL>
</DL>
</DL>
<HR>

<A NAME="leftMotor"><!-- --></A><H3>
leftMotor</H3>
<PRE>
private EV3LargeRegulatedMotor <B>leftMotor</B></PRE>
<DL>
<DD>The pointer to the left motor.
<P>
<DL>
</DL>
</DL>
<HR>

<A NAME="rightMotor"><!-- --></A><H3>
rightMotor</H3>
<PRE>
private EV3LargeRegulatedMotor <B>rightMotor</B></PRE>
<DL>
<DD>The pointer to the right motor.
<P>
<DL>
</DL>
</DL>
<HR>

<A NAME="lightValue"><!-- --></A><H3>
lightValue</H3>
<PRE>
public static float <B>lightValue</B></PRE>
<DL>
<DD>The value got by the front light sensor an updated by the LightSensor class.
<P>
<DL>
</DL>
</DL>
<HR>

<A NAME="distance"><!-- --></A><H3>
distance</H3>
<PRE>
private int <B>distance</B></PRE>
<DL>
<DD>The distance between the robot and the wall.
<P>
<DL>
</DL>
</DL>
<HR>

<A NAME="firstAngle"><!-- --></A><H3>
firstAngle</H3>
<PRE>
private double <B>firstAngle</B></PRE>
<DL>
<DD>The angle where the robot detect the wall for the first time.
<P>
<DL>
</DL>
</DL>
<HR>

<A NAME="secondAngle"><!-- --></A><H3>
secondAngle</H3>
<PRE>
private double <B>secondAngle</B></PRE>
<DL>
<DL>
</DL>
</DL>
<HR>

<A NAME="correctedTheta"><!-- --></A><H3>
correctedTheta</H3>
<PRE>
private double <B>correctedTheta</B></PRE>
<DL>
<DD>The angle that the robot is away from the zero angle.
<P>
<DL>
</DL>
</DL>
<HR>

<A NAME="firstPointDetected"><!-- --></A><H3>
firstPointDetected</H3>
<PRE>
private boolean <B>firstPointDetected</B></PRE>
<DL>
<DD>Used to prevent the robot from detecting a point 2 times.
<P>
<DL>
</DL>
</DL>
<HR>

<A NAME="secondPointDetected"><!-- --></A><H3>
secondPointDetected</H3>
<PRE>
private boolean <B>secondPointDetected</B></PRE>
<DL>
<DD>Used to prevent the robot from detecting a point 2 times.
<P>
<DL>
</DL>
</DL>
<HR>

<A NAME="locationTheta"><!-- --></A><H3>
locationTheta</H3>
<PRE>
private double <B>locationTheta</B></PRE>
<DL>
<DD>The current theta angle.
<P>
<DL>
</DL>
</DL>

<!-- ========= CONSTRUCTOR DETAIL ======== -->

<A NAME="constructor_detail"><!-- --></A>
<TABLE BORDER="1" WIDTH="100%" CELLPADDING="3" CELLSPACING="0" SUMMARY="">
<TR BGCOLOR="#CCCCFF" CLASS="TableHeadingColor">
<TH ALIGN="left" COLSPAN="1"><FONT SIZE="+2">
<B>Constructor Detail</B></FONT></TH>
</TR>
</TABLE>

<A NAME="UltrasonicLocalizer(ca.mcgill.ecse211.project.Navigation, ca.mcgill.ecse211.project.Odometer, EV3LargeRegulatedMotor, EV3LargeRegulatedMotor)"><!-- --></A><H3>
UltrasonicLocalizer</H3>
<PRE>
public <B>UltrasonicLocalizer</B>(<A HREF="../../../../ca/mcgill/ecse211/project/Navigation.html" title="class in ca.mcgill.ecse211.project">Navigation</A>&nbsp;navigation,
                           <A HREF="../../../../ca/mcgill/ecse211/project/Odometer.html" title="class in ca.mcgill.ecse211.project">Odometer</A>&nbsp;odometer,
                           EV3LargeRegulatedMotor&nbsp;leftMotor,
                           EV3LargeRegulatedMotor&nbsp;rightMotor)</PRE>
<DL>
<DD>The constructor for this class sets the navigation and odometer objects.
<P>
<DL>
<DT><B>Parameters:</B><DD><CODE>navigation</CODE> - pointer to the navigation class<DD><CODE>odometer</CODE> - pointer to the Odometer</DL>
</DL>

<!-- ============ METHOD DETAIL ========== -->

<A NAME="method_detail"><!-- --></A>
<TABLE BORDER="1" WIDTH="100%" CELLPADDING="3" CELLSPACING="0" SUMMARY="">
<TR BGCOLOR="#CCCCFF" CLASS="TableHeadingColor">
<TH ALIGN="left" COLSPAN="1"><FONT SIZE="+2">
<B>Method Detail</B></FONT></TH>
</TR>
</TABLE>

<A NAME="processUSData(int)"><!-- --></A><H3>
processUSData</H3>
<PRE>
public void <B>processUSData</B>(int&nbsp;distance)</PRE>
<DL>
<DD>This method updates the distance.
<P>
<DD><DL>
<DT><B>Parameters:</B><DD><CODE>distance</CODE> - The distance from the object detected by the Ultrasonic Sensor</DL>
</DD>
</DL>
<HR>

<A NAME="doUltrasonicLocalization()"><!-- --></A><H3>
doUltrasonicLocalization</H3>
<PRE>
public void <B>doUltrasonicLocalization</B>()</PRE>
<DL>
<DD>This method executes the ultrasonic localization.
<P>
<DD><DL>
</DL>
</DD>
</DL>
<HR>

<A NAME="doBangBang(int, int, int, int)"><!-- --></A><H3>
doBangBang</H3>
<PRE>
public void <B>doBangBang</B>(int&nbsp;bandCenter,
                       int&nbsp;bandWidth,
                       int&nbsp;motorLow,
                       int&nbsp;motorHigh)</PRE>
<DL>
<DD>This method implements the bangbang controller for the flag detection
<P>
<DD><DL>
<DT><B>Parameters:</B><DD><CODE>bandCenter</CODE> - The distance from the blocks.<DD><CODE>bandWidth</CODE> - The error margin.<DD><CODE>motorLow</CODE> - The low motor speed.<DD><CODE>motorHigh</CODE> - The high motor speed.</DL>
</DD>
</DL>
<HR>

<A NAME="fallingEdge()"><!-- --></A><H3>
fallingEdge</H3>
<PRE>
private void <B>fallingEdge</B>()</PRE>
<DL>
<DD>This method localizes the robot in the falling edge mode
 The ultrasonic sensor in front of the robot keeps detecting the distance between the wall and the robot
 When the ultrasonic sensor detects the falling edge, the robot records the turning angle, reverses the turning 
 direction and keeps turning until it finds the next falling edge. 
 
 Because the noise margin exists, we record two turning angles.The first one is when the distance is greater than the sum of
 distance threshold and the noise margin (d+k); The second one is when it is less than the difference between them (d-k).
 Every time the falling edge is detected when the robot gets the two readings and the turning angle is the average of these two 
 readings.
<P>
<DD><DL>
</DL>
</DD>
</DL>
<HR>

<A NAME="risingEdge()"><!-- --></A><H3>
risingEdge</H3>
<PRE>
private void <B>risingEdge</B>()</PRE>
<DL>
<DD>This method localizes the robot in the rising edge mode. 
 
 Similar to the falling edge, we record two turning angles and record their average value to be the turning angle. 
 The first one is when the distance is less than the difference of distance threshold and the noise margin (d-k); 
 The second one is when it is greater than the sum between them (d+k).
 Every time the rising edge is detected when the robot gets the two readings and the turning angle is the average of these two 
 readings.
<P>
<DD><DL>
</DL>
</DD>
</DL>
<HR>

<A NAME="correctAngleAndLocation()"><!-- --></A><H3>
correctAngleAndLocation</H3>
<PRE>
public void <B>correctAngleAndLocation</B>()</PRE>
<DL>
<DD>This method gets the two turning angles either from the falling edge mode or the rising edge mode. 
 First it measures the approximate location of the robot. This measurements are applied in the main class
 to navigate the robot to the point (0,0).
 Then it calculates the corrected angle according to the two turning angles and the chosen mode
 Finally, it set the odometer Theta to be the calculated value and turn the robot to the 0 degree direction.
<P>
<DD><DL>
</DL>
</DD>
</DL>
<HR>

<A NAME="readUSDistance()"><!-- --></A><H3>
readUSDistance</H3>
<PRE>
public int <B>readUSDistance</B>()</PRE>
<DL>
<DD>This method returns the value of the distance.
 The if statement is there to put a maximum in the distance value in case the US sensor
 does not detect anything. This is done to help us collect and graph distance data
 since if the sensor does not detect anything it will return a value greater than 200,000 which is obviously incorrect.
 The maximum of the distance value is not used for anything else so this is not "hard-coding" to control the robot movement.
<P>
<DD><DL>

<DT><B>Returns:</B><DD>distance value</DL>
</DD>
</DL>
<!-- ========= END OF CLASS DATA ========= -->
<HR>


<!-- ======= START OF BOTTOM NAVBAR ====== -->
<A NAME="navbar_bottom"><!-- --></A>
<A HREF="#skip-navbar_bottom" title="Skip navigation links"></A>
<TABLE BORDER="0" WIDTH="100%" CELLPADDING="1" CELLSPACING="0" SUMMARY="">
<TR>
<TD COLSPAN=2 BGCOLOR="#EEEEFF" CLASS="NavBarCell1">
<A NAME="navbar_bottom_firstrow"><!-- --></A>
<TABLE BORDER="0" CELLPADDING="0" CELLSPACING="3" SUMMARY="">
  <TR ALIGN="center" VALIGN="top">
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="../../../../ca/mcgill/ecse211/project/package-summary.html"><FONT CLASS="NavBarFont1"><B>Package</B></FONT></A>&nbsp;</TD>
  <TD BGCOLOR="#FFFFFF" CLASS="NavBarCell1Rev"> &nbsp;<FONT CLASS="NavBarFont1Rev"><B>Class</B></FONT>&nbsp;</TD>
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="class-use/UltrasonicLocalizer.html"><FONT CLASS="NavBarFont1"><B>Use</B></FONT></A>&nbsp;</TD>
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="package-tree.html"><FONT CLASS="NavBarFont1"><B>Tree</B></FONT></A>&nbsp;</TD>
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="../../../../deprecated-list.html"><FONT CLASS="NavBarFont1"><B>Deprecated</B></FONT></A>&nbsp;</TD>
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="../../../../index-files/index-1.html"><FONT CLASS="NavBarFont1"><B>Index</B></FONT></A>&nbsp;</TD>
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="../../../../help-doc.html"><FONT CLASS="NavBarFont1"><B>Help</B></FONT></A>&nbsp;</TD>
  </TR>
</TABLE>
</TD>
<TD ALIGN="right" VALIGN="top" ROWSPAN=3><EM>
</EM>
</TD>
</TR>

<TR>
<TD BGCOLOR="white" CLASS="NavBarCell2"><FONT SIZE="-2">
&nbsp;<A HREF="../../../../ca/mcgill/ecse211/project/OdometryDisplay.html" title="class in ca.mcgill.ecse211.project"><B>PREV CLASS</B></A>&nbsp;
&nbsp;<A HREF="../../../../ca/mcgill/ecse211/project/UltrasonicPoller.html" title="class in ca.mcgill.ecse211.project"><B>NEXT CLASS</B></A></FONT></TD>
<TD BGCOLOR="white" CLASS="NavBarCell2"><FONT SIZE="-2">
  <A HREF="../../../../index.html?ca/mcgill/ecse211/project/UltrasonicLocalizer.html" target="_top"><B>FRAMES</B></A>  &nbsp;
&nbsp;<A HREF="UltrasonicLocalizer.html" target="_top"><B>NO FRAMES</B></A>  &nbsp;
&nbsp;<SCRIPT type="text/javascript">
  <!--
  if(window==top) {
    document.writeln('<A HREF="../../../../allclasses-noframe.html"><B>All Classes</B></A>');
  }
  //-->
</SCRIPT>
<NOSCRIPT>
  <A HREF="../../../../allclasses-noframe.html"><B>All Classes</B></A>
</NOSCRIPT>


</FONT></TD>
</TR>
<TR>
<TD VALIGN="top" CLASS="NavBarCell3"><FONT SIZE="-2">
  SUMMARY:&nbsp;NESTED&nbsp;|&nbsp;<A HREF="#field_summary">FIELD</A>&nbsp;|&nbsp;<A HREF="#constructor_summary">CONSTR</A>&nbsp;|&nbsp;<A HREF="#method_summary">METHOD</A></FONT></TD>
<TD VALIGN="top" CLASS="NavBarCell3"><FONT SIZE="-2">
DETAIL:&nbsp;<A HREF="#field_detail">FIELD</A>&nbsp;|&nbsp;<A HREF="#constructor_detail">CONSTR</A>&nbsp;|&nbsp;<A HREF="#method_detail">METHOD</A></FONT></TD>
</TR>
</TABLE>
<A NAME="skip-navbar_bottom"></A>
<!-- ======== END OF BOTTOM NAVBAR ======= -->

<HR>

</BODY>
</HTML>
